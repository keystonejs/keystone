{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault2 = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _regenerator = _interopRequireDefault2(require(\"@babel/runtime/regenerator\"));\n\nvar _interopRequireDefault = require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");\n\nexports.__esModule = true;\nexports[\"default\"] = void 0;\n\nvar _asyncToGenerator2 = _interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/asyncToGenerator\"));\n\nvar _router = _interopRequireDefault(require(\"next/router\"));\n\nvar _onDemandEntriesUtils = require(\"./on-demand-entries-utils\");\n\nvar _this = void 0;\n\nvar _default =\n/*#__PURE__*/\nfunction () {\n  var _ref2 = (0, _asyncToGenerator2[\"default\"])(\n  /*#__PURE__*/\n  _regenerator[\"default\"].mark(function _callee(_ref) {\n    var assetPrefix;\n    return _regenerator[\"default\"].wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            assetPrefix = _ref.assetPrefix;\n\n            _router[\"default\"].ready(function () {\n              _router[\"default\"].events.on('routeChangeComplete', _onDemandEntriesUtils.setupPing.bind(_this, assetPrefix, function () {\n                return _router[\"default\"].pathname;\n              }));\n            });\n\n            (0, _onDemandEntriesUtils.setupPing)(assetPrefix, function () {\n              return _router[\"default\"].pathname;\n            }, _onDemandEntriesUtils.currentPage); // prevent HMR connection from being closed when running tests\n\n            if (!process.env.__NEXT_TEST_MODE) {\n              document.addEventListener('visibilitychange', function (event) {\n                var state = document.visibilityState;\n\n                if (state === 'visible') {\n                  (0, _onDemandEntriesUtils.setupPing)(assetPrefix, function () {\n                    return _router[\"default\"].pathname;\n                  }, true);\n                } else {\n                  (0, _onDemandEntriesUtils.closePing)();\n                }\n              });\n            }\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function (_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexports[\"default\"] = _default;","map":{"version":3,"sources":["/Users/mike/Development/GEL/node_modules/next/dist/client/dev/on-demand-entries-client.js"],"names":["_interopRequireDefault","require","exports","__esModule","_asyncToGenerator2","_router","_onDemandEntriesUtils","_this","_default","_ref2","_ref","assetPrefix","ready","events","on","setupPing","bind","pathname","currentPage","process","env","__NEXT_TEST_MODE","document","addEventListener","event","state","visibilityState","closePing","_x","apply","arguments"],"mappings":"AAAA;;;;;;AAAa,IAAIA,sBAAsB,GAACC,OAAO,CAAC,sDAAD,CAAlC;;AAA2FC,OAAO,CAACC,UAAR,GAAmB,IAAnB;AAAwBD,OAAO,WAAP,GAAgB,KAAK,CAArB;;AAAuB,IAAIE,kBAAkB,GAACJ,sBAAsB,CAACC,OAAO,CAAC,iDAAD,CAAR,CAA7C;;AAA0G,IAAII,OAAO,GAACL,sBAAsB,CAACC,OAAO,CAAC,aAAD,CAAR,CAAlC;;AAA2D,IAAIK,qBAAqB,GAACL,OAAO,CAAC,2BAAD,CAAjC;;AAA+D,IAAIM,KAAK,GAAC,KAAK,CAAf;;AAAiB,IAAIC,QAAQ;AAAC;AAAa,YAAU;AAAC,MAAIC,KAAK,GAAC,CAAC,GAAEL,kBAAkB,WAArB;AAAA;AAAA,+BAA+B,iBAAUM,IAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoBC,YAAAA,WAApB,GAAiCD,IAAjC,CAAoBC,WAApB;;AAAsCN,YAAAA,OAAO,WAAP,CAAgBO,KAAhB,CAAsB,YAAI;AAACP,cAAAA,OAAO,WAAP,CAAgBQ,MAAhB,CAAuBC,EAAvB,CAA0B,qBAA1B,EAAgDR,qBAAqB,CAACS,SAAtB,CAAgCC,IAAhC,CAAqCT,KAArC,EAA2CI,WAA3C,EAAuD;AAAA,uBAAIN,OAAO,WAAP,CAAgBY,QAApB;AAAA,eAAvD,CAAhD;AAAuI,aAAlK;;AAAoK,aAAC,GAAEX,qBAAqB,CAACS,SAAzB,EAAoCJ,WAApC,EAAgD;AAAA,qBAAIN,OAAO,WAAP,CAAgBY,QAApB;AAAA,aAAhD,EAA6EX,qBAAqB,CAACY,WAAnG,EAA1M,CAA0T;;AACpxB,gBAAG,CAACC,OAAO,CAACC,GAAR,CAAYC,gBAAhB,EAAiC;AAACC,cAAAA,QAAQ,CAACC,gBAAT,CAA0B,kBAA1B,EAA6C,UAAAC,KAAK,EAAE;AAAC,oBAAIC,KAAK,GAACH,QAAQ,CAACI,eAAnB;;AAAmC,oBAAGD,KAAK,KAAG,SAAX,EAAqB;AAAC,mBAAC,GAAEnB,qBAAqB,CAACS,SAAzB,EAAoCJ,WAApC,EAAgD;AAAA,2BAAIN,OAAO,WAAP,CAAgBY,QAApB;AAAA,mBAAhD,EAA6E,IAA7E;AAAoF,iBAA1G,MAA8G;AAAC,mBAAC,GAAEX,qBAAqB,CAACqB,SAAzB;AAAuC;AAAC,eAA/O;AAAkP;;AADsM;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAA/B,EAAV;;AAC1J,SAAO,UAASC,EAAT,EAAY;AAAC,WAAOnB,KAAK,CAACoB,KAAN,CAAY,IAAZ,EAAiBC,SAAjB,CAAP;AAAoC,GAAxD;AAA0D,CADqF,EAA1B;;AACxD5B,OAAO,WAAP,GAAgBM,QAAhB","sourcesContent":["\"use strict\";var _interopRequireDefault=require(\"@babel/runtime-corejs2/helpers/interopRequireDefault\");exports.__esModule=true;exports.default=void 0;var _asyncToGenerator2=_interopRequireDefault(require(\"@babel/runtime-corejs2/helpers/asyncToGenerator\"));var _router=_interopRequireDefault(require(\"next/router\"));var _onDemandEntriesUtils=require(\"./on-demand-entries-utils\");var _this=void 0;var _default=/*#__PURE__*/function(){var _ref2=(0,_asyncToGenerator2.default)(function*(_ref){var{assetPrefix}=_ref;_router.default.ready(()=>{_router.default.events.on('routeChangeComplete',_onDemandEntriesUtils.setupPing.bind(_this,assetPrefix,()=>_router.default.pathname));});(0,_onDemandEntriesUtils.setupPing)(assetPrefix,()=>_router.default.pathname,_onDemandEntriesUtils.currentPage);// prevent HMR connection from being closed when running tests\nif(!process.env.__NEXT_TEST_MODE){document.addEventListener('visibilitychange',event=>{var state=document.visibilityState;if(state==='visible'){(0,_onDemandEntriesUtils.setupPing)(assetPrefix,()=>_router.default.pathname,true);}else{(0,_onDemandEntriesUtils.closePing)();}});}});return function(_x){return _ref2.apply(this,arguments);};}();exports.default=_default;"]},"metadata":{},"sourceType":"script"}