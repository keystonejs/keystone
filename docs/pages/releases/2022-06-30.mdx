import { Markdown, getStaticProps } from '../../components/Markdown';
import { Emoji } from '../../components/primitives/Emoji';
import { Stack } from '../../components/primitives/Stack';

# Release: 30 June 2022

## Adds MySQL Support

Keystone now supports MySQL by setting `mysql` in your `db.provider` [see pull request #7538](https://github.com/keystonejs/keystone/pull/7538) for further information.

<Emoji symbol="âš ï¸" alt="Warning" /> There are some differences in how Postgres and MySQL operate so be sure to checkout our new [choosing the right database](https://keystonejs.com/docs/guides/choosing-a-database) guide.

## Admin UI Improvements

- <Emoji symbol="âž•" alt="Plus" /> Adds `ui.description` for fields to show a description below the label in the Admin UI - [#7578](https://github.com/keystonejs/keystone/pull/7578)
- <Emoji symbol="âž•" alt="Plus" /> Adds the ability to set ambiguous plurals - like `Firmware` or `Shrimp` - as list names without receiving an error. This builds on the existing `graphql.plural` configuration by adding the configuration options of `ui.label`, `ui.singular`, `ui.plural` and `ui.path` to change the auto-generated names of lists used in the Admin UI [#7657](https://github.com/keystonejs/keystone/pull/7657)
- Fixes the inconsistent spacing in the Admin UI on relationships fields using the cards display mode - [#7616](https://github.com/keystonejs/keystone/pull/7616)
- Fixes the semantic-based browser input behaviour for inline create and edit forms on relationship fields when using the cards display mode - [#7629](https://github.com/keystonejs/keystone/pull/7629)
- Fixes the layout and component block floating toolbars from being shown behind other elements - [#7604](https://github.com/keystonejs/keystone/pull/7604)
- Moves the remove button in component block array fields from inside a menu on the drag handle to the right of the drag handle - [#7626](https://github.com/keystonejs/keystone/pull/7626)
- Fixes the document editor from breaking when the underlying schema for a component has a new field added. Please note that new fields will still be missing for existing data when fetched from GraphQL - [#7674](https://github.com/keystonejs/keystone/pull/7674)
- Changes segmented control to not show a clear button if `isRequired` is set - [#7639](https://github.com/keystonejs/keystone/pull/7639) Thanks [@u-ishii](https://github.com/u-ishii)

## Other Improvements <Emoji symbol="âœ¨" alt="Sparkles" />

- <Emoji symbol="âž•" alt="Plus" /> Changes the `cloudinaryImage` GraphQL output type to be exported for developer usage, for example in virtual fields - [#7607](https://github.com/keystonejs/keystone/pull/7607)  Thanks [@mmachatschek](https://github.com/mmachatschek)!
- <Emoji symbol="âž•" alt="Plus" /> Adds support for Prisma's `shadowDatabaseUrl` option with `db.shadowDatabaseUrl`. Your Prisma schemas will now always include `shadowDatabaseUrl = env("SHADOW_DATABASE_URL")`, though using `db.shadowDatabaseUrl` is optional - [#7350](https://github.com/keystonejs/keystone/pull/7350) Thanks [@chelkyl](https://github.com/chelkyl) and [@jlarmstrongiv](https://github.com/jlarmstrongiv)!
- <Emoji symbol="âž•" alt="Plus" /> Adds support for BigInt autoincrement id fields with `idField: { kind: 'autoincrement', type: 'BigInt' }` - [#7188](https://github.com/keystonejs/keystone/pull/7188) Thanks [@MurzNN](https://github.com/MurzNN)!
- Fixes for `graphQLSchemaExtension`, custom resolvers, if replacing default resolvers, were previously broken - [#7644](https://github.com/keystonejs/keystone/pull/7644)
- <Emoji symbol="âž•" alt="Plus" /> Adds `db.nativeType` option to the `text` field to customise the database type - [#7538](https://github.com/keystonejs/keystone/pull/7538)
- Fixes the generation of an invalid Prisma schema when `{field}.isIndexed: true` and `{field}.db.map` are set - [#7666](https://github.com/keystonejs/keystone/pull/7666) Thanks [@TonnyORG](https://github.com/TonnyORG)!

## Acknowledgements <Emoji symbol="ðŸ’™" alt="Blue heart" />
Big shoutout to the following community members for their help in improving our documentation with their contributions:

- [#7665](https://github.com/keystonejs/keystone/pull/7665) - [@EvonuX](https://github.com/EvonuX)
- [#7627](https://github.com/keystonejs/keystone/pull/7627) - [@ratson](https://github.com/ratson)

Thanks to [@mmachatschek](https://github.com/mmachatschek) ([#7607](https://github.com/keystonejs/keystone/pull/7607)), [@ratson](https://github.com/ratson) ([#7627](https://github.com/keystonejs/keystone/pull/7627)), [@chelkyl](https://github.com/chelkyl) ([#7350](https://github.com/keystonejs/keystone/pull/7350)) and [@u-ishii](https://github.com/u-ishii) ([#7639](https://github.com/keystonejs/keystone/pull/7639)) for making their first contributions to the project!

# Verbose Changelog <Emoji symbol="ðŸ“œ" alt="Scroll" />

You can also view the [verbose changelog](https://github.com/keystonejs/keystone/pull/7542) or compare via GitHub since [2022-06-09](https://github.com/keystonejs/keystone/compare/2022-06-09...2022-06-30)

export default ({ children, ...props }) => (
  <Markdown
    description="Adds support for MySQL and many additional Admin UI improvements."
    {...props}
  >
    {children}
  </Markdown>
);
export { getStaticProps };
